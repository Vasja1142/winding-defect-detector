
#### Вектор целей:

1.  Сбор кадров и разметка. Попробовать реализовать локализатор и после него записывать кадры, а не в оригинальном разрешении, дабы не переполнять память.
    -   Сбор Эталонного Бенчмарка – Достаточно размеченных кадров с разных станков, с разным освещением.
    -   Сбор основного датасета. Также с разным освещением, с разными углами, в разные дни.

2.  Разделить работу детекции на:
    -   Локализатор (с экрана диспетчера).
    -   Детекцию (обрезка, изменение разрешения в `yolo`, прогноз).

3.  Подавать на вход 1 канал: `model.train(..., channels=1)`.

4.  Добавить аугментаций из `albumentations`, например:
    -   `RandomBrightnessContrast`: Имитация разной яркости.
    -   `GaussNoise`: Имитация шума камеры.
    -   `MotionBlur`: Имитация смаза при движении.
    -   `ShiftScaleRotate`: Небольшие сдвиги и повороты, имитирующие разный ракурс.

5.  Решать задачу детекции дефекта без их различия.

6.  В дальнейшем поверх настроить `yolo` для задачи классификации, обучить ее, и запускать после детекции и обрезки с небольшим запасом по бокам (возможно без запаса).

#### **Операционный Цикл (Real-Time)**

```mermaid
graph TD

    subgraph " "
        M1_Title["<b>Модуль 1: Локализатор видимости оператора</b>"]
        A["Промышленная камера <br> (Высокое разрешение)"]
        B["ПО Диспетчера <br> (Источник координат)"]
        C("Определение области интереса")
        
        M1_Title ~~~ A & B  
        A --> C
        B --> C
        A --> B
    end

    C --> D

    subgraph " "
        M2_Title["<b>Модуль 2: Детектор Дефектов</b>"]
        D("<b>YOLOv12</b> <br> Поиск ЛЮБОГО дефекта")
        M2_Title ~~~ D 
    end

    D --> E{"Дефект найден?"}
    E -- "Да" --> G
    E -- "Нет" --> F["Кадр чистый"]

    subgraph " "
        M3_Title["<b>Модуль 3: Классификатор Дефектов</b>"]
        G("Вырезка области дефекта")
        H("<b>YOLOv12n-cls</b> <br> Определение точного типа дефекта")

        M3_Title ~~~ G 
        G --> H
    end

    H --> I

    subgraph " "
       M4_Title["<b>Модуль 4: Система Оповещения</b>"]
       I("Отображение дефекта <br> на экране диспетчера <br> и запись в архив")
       M4_Title ~~~ I 
    end

    %% Стилизация для заголовков, чтобы они выглядели как заголовки
    style M1_Title fill:#3a3a3a,stroke:#333,color:#fff
    style M2_Title fill:#3a3a3a,stroke:#333,color:#fff
    style M3_Title fill:#3a3a3a,stroke:#333,color:#fff
    style M4_Title fill:#3a3a3a,stroke:#333,color:#fff
```

